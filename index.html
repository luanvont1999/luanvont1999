<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>M√¥ ph·ªèng C·ª≠a s·ªï (Mobile Friendly) - Th∆∞ m·ª•c (T∆∞∆°ng t√°c)</title>
<style>
  /* General body styling - GI·ªÆ NGUY√äN */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f0f0f0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding: 10px;
    box-sizing: border-box;
  }

  /* Window container styling - GI·ªÆ NGUY√äN */
  .window {
    width: 100%;
    max-width: 700px;
    height: 85vh;
    max-height: 600px;
    background-color: #ffffff;
    border: 1px solid #a0a0a0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    display: flex;
    flex-direction: column;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
  }

  /* Title bar styling - GI·ªÆ NGUY√äN */
  .title-bar {
    background-color: #f0f0f0;
    padding: 10px 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #cccccc;
  }

  .title-bar .title {
    font-weight: bold;
    font-size: 1em;
    color: #333333;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-right: 10px;
  }

  /* Window controls (minimize, maximize, close) - GI·ªÆ NGUY√äN */
  .window-controls {
    display: flex;
    flex-shrink: 0;
  }

  .window-controls button {
    background-color: transparent;
    border: none;
    padding: 8px 10px;
    margin-left: 4px;
    font-size: 1em;
    cursor: pointer;
    color: #333333;
    border-radius: 4px;
  }

  .window-controls button:hover,
  .window-controls button:active {
    background-color: #e0e0e0;
  }

  .window-controls .close:hover,
  .window-controls .close:active {
    background-color: #e81123;
    color: white;
  }

  /* Window content area - GI·ªÆ NGUY√äN */
  .window-content {
    padding: 0;
    flex-grow: 1;
    overflow-y: auto;
    color: #333333;
  }

  /* File explorer list styling - GI·ªÆ NGUY√äN */
  .file-explorer {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .file-explorer li {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    border-bottom: 1px solid #eee;
    cursor: pointer; /* Thay ƒë·ªïi th√†nh pointer ƒë·ªÉ cho bi·∫øt c√≥ th·ªÉ nh·∫•p */
    font-size: 0.95em;
  }

  .file-explorer li:last-child {
    border-bottom: none;
  }

  .file-explorer li:hover {
    background-color: #f5f5f5;
  }

  .file-explorer .icon {
    margin-right: 12px;
    width: 20px;
    text-align: center;
    font-size: 1.2em;
  }

  .icon-folder::before { content: "üìÅ"; color: #FFD700; }
  .icon-image::before { content: "üñºÔ∏è"; }
  .icon-text::before { content: "üìÑ"; }
  .icon-generic-file::before { content: "‚ñ™Ô∏è"; }

  .file-explorer .file-name {
    flex-grow: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .file-explorer .file-type,
  .file-explorer .file-size {
    font-size: 0.85em;
    color: #666;
    margin-left: 15px;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .file-explorer-header {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    border-bottom: 1px solid #ccc;
    background-color: #f9f9f9;
    font-weight: bold;
    font-size: 0.9em;
    color: #333;
    cursor: default; /* Header kh√¥ng c·∫ßn click */
  }
  .file-explorer-header .file-name { flex-grow: 1; }
  .file-explorer-header .file-type { width: 100px; text-align: left; margin-left: calc(12px + 15px); }
  .file-explorer-header .file-size { width: 80px; text-align: right;}

  .icon-minimize::before { content: "‚Äî"; font-weight: bold; }
  .icon-maximize::before { content: "‚ñ°"; font-weight: bold; }
  .icon-close::before { content: "‚úï"; font-weight: bold; }

  @media (max-width: 600px) {
    .file-explorer .file-type,
    .file-explorer .file-size { display: none; }
    .file-explorer-header .file-type,
    .file-explorer-header .file-size { display: none; }
    .file-explorer li { padding: 12px 10px; }
    .file-explorer .icon { margin-right: 8px; }
    .file-explorer-header .file-name { margin-left: 8px; }
  }

  @media (max-width: 480px) {
    body { padding: 5px; }
    .window { height: 90vh; max-height: none; border-radius: 5px; }
    .title-bar { padding: 8px 10px; }
    .title-bar .title { font-size: 0.9em; }
    .window-controls button { padding: 6px 8px; font-size: 0.9em; }
  }

  .window.maximized-window {
    width: 100vw !important; height: 100vh !important; top: 0 !important; left: 0 !important;
    max-width: none !important; max-height: none !important; border-radius: 0 !important;
    position: fixed !important; z-index: 1000;
  }

  /* === CSS M·ªöI CHO MODAL === */
  .modal-overlay {
    position: fixed; /* Che ph·ªß to√†n b·ªô m√†n h√¨nh */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6); /* N·ªÅn m·ªù */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000; /* ƒê·∫£m b·∫£o modal ·ªü tr√™n c√πng */
    opacity: 0; /* ·∫®n ban ƒë·∫ßu */
    visibility: hidden; /* ·∫®n ban ƒë·∫ßu */
    transition: opacity 0.3s ease, visibility 0.3s ease;
  }

  .modal-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  .modal-content {
    background-color: #fff;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    width: 90%;
    max-width: 500px; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông modal */
    max-height: 80vh; /* Gi·ªõi h·∫°n chi·ªÅu cao modal */
    overflow-y: auto; /* Th√™m cu·ªôn n·∫øu n·ªôi dung d√†i */
    position: relative;
    transform: scale(0.9); /* Hi·ªáu ·ª©ng v√†o */
    transition: transform 0.3s ease;
  }

  .modal-overlay.active .modal-content {
    transform: scale(1);
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
    margin-bottom: 15px;
  }

  .modal-title {
    font-size: 1.25em;
    font-weight: bold;
  }

  .modal-close-btn {
    background: none;
    border: none;
    font-size: 1.8em;
    cursor: pointer;
    color: #888;
    line-height: 1;
  }
   .modal-close-btn:hover {
    color: #333;
   }

  .modal-body img {
    max-width: 100%; /* H√¨nh ·∫£nh v·ª´a v·ªõi modal */
    height: auto;
    display: block;
    margin: 0 auto;
    border-radius: 4px;
  }

  .modal-body p {
    line-height: 1.6;
    white-space: pre-wrap; /* Gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng xu·ªëng d√≤ng c·ªßa text */
  }

  .modal-body input[type="password"],
  .modal-body input[type="text"] { /* √Åp d·ª•ng cho c·∫£ text input n·∫øu c·∫ßn */
    width: calc(100% - 22px); /* Full width tr·ª´ padding */
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1em;
  }

  .modal-body button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1em;
    transition: background-color 0.2s ease;
  }
  .modal-body button:hover {
    background-color: #0056b3;
  }
  .password-error {
    color: red;
    font-size: 0.9em;
    margin-top: 5px;
  }
  /* === K·∫æT TH√öC CSS MODAL === */

</style>
</head>
<body>

<div class="window" id="myWindow">
  <div class="title-bar" id="myWindowTitleBar">
    <div class="title">T√†i li·ªáu c·ªßa t√¥i</div>
    <div class="window-controls">
      <button class="minimize" aria-label="Thu nh·ªè"><span class="icon-minimize"></span></button>
      <button class="maximize" aria-label="Ph√≥ng to"><span class="icon-maximize"></span></button>
      <button class="close" aria-label="ƒê√≥ng"><span class="icon-close"></span></button>
    </div>
  </div>
  <div class="window-content">
    <div class="file-explorer-header">
        <span class="icon"></span>
        <span class="file-name">T√™n</span>
        <span class="file-type">Lo·∫°i</span>
        <span class="file-size">K√≠ch th∆∞·ªõc</span>
    </div>

    <ul class="file-explorer">
      <li data-file-type="image" data-file-name="·∫¢nh c∆∞·ªõi.jpg">
        <span class="icon icon-image"></span>
        <span class="file-name">·∫¢nh c∆∞·ªõi.jpg</span>
        <span class="file-type">H√¨nh ·∫£nh JPG</span>
        <span class="file-size">2.3 MB</span>
      </li>
      <li data-file-type="text" data-file-name="Mr.Teatime.txt">
        <span class="icon icon-text"></span>
        <span class="file-name">Mr.Teatime.txt</span>
        <span class="file-type">T√†i li·ªáu vƒÉn b·∫£n</span>
        <span class="file-size">15 KB</span>
      </li>
      <li data-file-type="docx" data-file-name="Rosa-Diaz.docx" data-requires-password="true">
        <span class="icon icon-text"></span>
        <span class="file-name">Rosa-Diaz.docx</span>
        <span class="file-type">T√†i li·ªáu Word</span>
        <span class="file-size">1.1 MB</span>
      </li>
      <li data-file-type="folder"> <span class="icon icon-folder"></span>
        <span class="file-name">M·ª•c l∆∞u tr·ªØ</span>
        <span class="file-type">Th∆∞ m·ª•c</span>
        <span class="file-size">--</span>
      </li>
       <li data-file-type="script" data-file-name="tap_tin_sao_luu.sh">
        <span class="icon icon-generic-file"></span>
        <span class="file-name">tap_tin_sao_luu.sh</span>
        <span class="file-type">T·∫≠p tin SH</span>
        <span class="file-size">5 KB</span>
      </li>
    </ul>
  </div>
</div>

<div class="modal-overlay" id="fileModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title" id="modalTitle">Ti√™u ƒë·ªÅ Modal</h2>
      <button class="modal-close-btn" id="modalCloseBtn">&times;</button>
    </div>
    <div class="modal-body" id="modalBody">
      </div>
  </div>
</div>


<script>
  // Get references to DOM elements - GI·ªÆ NGUY√äN PH·∫¶N N√ÄY
  const myWindow = document.getElementById('myWindow');
  const titleBar = document.getElementById('myWindowTitleBar');
  const minimizeButton = myWindow.querySelector('.minimize');
  const maximizeButton = myWindow.querySelector('.maximize');
  const closeButton = myWindow.querySelector('.close');

  const isTouchDevice = () => 'ontouchstart' in window || navigator.maxTouchPoints > 0;

  if (!isTouchDevice()) {
    titleBar.style.cursor = 'move';
    let isDragging = false;
    let offsetX, offsetY;
    titleBar.addEventListener('mousedown', (e) => {
      if (e.button !== 0 || e.target.closest('.window-controls button')) return;
      isDragging = true;
      const rect = myWindow.getBoundingClientRect();
      if (getComputedStyle(myWindow).position === 'fixed' || getComputedStyle(myWindow).position === 'absolute') {
          offsetX = e.clientX - rect.left;
          offsetY = e.clientY - rect.top;
      } else {
          offsetX = e.clientX - rect.left;
          offsetY = e.clientY - rect.top;
          if (getComputedStyle(myWindow).position === 'static') {
            myWindow.style.position = 'relative';
          }
      }
      document.body.style.userSelect = 'none';
      myWindow.style.cursor = 'grabbing';
    });
    document.addEventListener('mousemove', (e) => {
      // Dragging logic is complex with flex centering, simplified here
      if (!isDragging) return;
      // console.log("Dragging, position update might be needed based on window's CSS position.")
    });
    document.addEventListener('mouseup', (e) => {
      if (e.button !== 0 || !isDragging) return;
      isDragging = false;
      document.body.style.userSelect = '';
      myWindow.style.cursor = 'default';
      if (titleBar.style.cursor !== 'move') {
        titleBar.style.cursor = 'move';
      }
    });
  }

  minimizeButton.addEventListener('click', () => {
    alert('Thu nh·ªè (ch·ª©c nƒÉng ch∆∞a ƒë∆∞·ª£c tri·ªÉn khai)');
  });
  maximizeButton.addEventListener('click', () => {
    const isMaximized = myWindow.classList.contains('maximized-window');
    if (!isMaximized) {
        myWindow.dataset.oldPosition = getComputedStyle(myWindow).position;
        myWindow.dataset.oldTop = myWindow.style.top;
        myWindow.dataset.oldLeft = myWindow.style.left;
        myWindow.dataset.oldWidth = myWindow.style.width;
        myWindow.dataset.oldHeight = myWindow.style.height;
        myWindow.dataset.oldMaxWidth = myWindow.style.maxWidth;
        myWindow.dataset.oldMaxHeight = myWindow.style.maxHeight;
        myWindow.dataset.oldBorderRadius = myWindow.style.borderRadius;
        myWindow.classList.add('maximized-window');
    } else {
        myWindow.classList.remove('maximized-window');
        myWindow.style.position = myWindow.dataset.oldPosition || 'relative';
        myWindow.style.top = myWindow.dataset.oldTop || '';
        myWindow.style.left = myWindow.dataset.oldLeft || '';
        myWindow.style.width = myWindow.dataset.oldWidth || '100%';
        myWindow.style.height = myWindow.dataset.oldHeight || '85vh';
        myWindow.style.maxWidth = myWindow.dataset.oldMaxWidth || '700px';
        myWindow.style.maxHeight = myWindow.dataset.oldMaxHeight || '600px';
        myWindow.style.borderRadius = myWindow.dataset.oldBorderRadius || '8px';
    }
  });
  closeButton.addEventListener('click', () => {
    if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒë√≥ng c·ª≠a s·ªï n√†y?')) {
      myWindow.style.display = 'none';
    }
  });

  // === JAVASCRIPT M·ªöI CHO CH·ª®C NƒÇNG M·ªû FILE V√Ä MODAL ===
  const fileModal = document.getElementById('fileModal');
  const modalTitle = document.getElementById('modalTitle');
  const modalBody = document.getElementById('modalBody');
  const modalCloseBtn = document.getElementById('modalCloseBtn');
  const fileItems = document.querySelectorAll('.file-explorer li[data-file-type]');

  const CORRECT_PASSWORD = "123"; // M·∫≠t kh·∫©u m·∫´u
  const ROSA_MESSAGE = "ƒê√¢y l√† l·∫ßn cu·ªëi t√¥i g·ª≠i tin cho √¥ng, t·ª´ mai t√¥i s·∫Ω ngh·ªâ vi·ªác ·ªü s·ªü c·∫£nh s√°t\nke-hoach-trien-khai-luc-luong-TUYET-MAT.docx";

  function openModal() {
    fileModal.classList.add('active');
  }

  function closeModal() {
    fileModal.classList.remove('active');
    modalBody.innerHTML = ''; // X√≥a n·ªôi dung c≈© c·ªßa modal khi ƒë√≥ng
  }

  modalCloseBtn.addEventListener('click', closeModal);
  fileModal.addEventListener('click', (event) => { // ƒê√≥ng modal khi nh·∫•p v√†o overlay
    if (event.target === fileModal) {
      closeModal();
    }
  });

  fileItems.forEach(item => {
    item.addEventListener('click', () => {
      const fileType = item.dataset.fileType;
      const fileName = item.dataset.fileName;
      const requiresPassword = item.dataset.requiresPassword === 'true';

      modalTitle.textContent = fileName; // ƒê·∫∑t ti√™u ƒë·ªÅ modal l√† t√™n file

      if (requiresPassword) {
        showPasswordPrompt(fileName);
      } else {
        displayFileContent(fileType, fileName);
      }
    });
  });

  function displayFileContent(fileType, fileName) {
    modalBody.innerHTML = ''; // X√≥a n·ªôi dung c≈©
    switch (fileType) {
      case 'image':
        // S·ª≠ d·ª•ng placeholder image v√¨ kh√¥ng c√≥ ·∫£nh th·ª±c t·∫ø
        const img = document.createElement('img');
        img.src = `https://placehold.co/400x300/E6E6E6/666666?text=${encodeURIComponent(fileName)}`;
        img.alt = fileName;
        modalBody.appendChild(img);
        break;
      case 'text':
        const pText = document.createElement('p');
        pText.textContent = `ƒêi l·∫°i, s·ª≠ d·ª•ng thi·∫øt b·ªã ƒë·ªïi gi·ªçng (gi·ªçng ƒë·ªãa ph∆∞∆°ng?), nh·∫≠n ti·ªÅn g·ª≠i ra n∆∞·ªõc ngo√†i, v√† ki√™u ng·∫°o`;
        modalBody.appendChild(pText);
        break;
      case 'docx': // Tr∆∞·ªùng h·ª£p n√†y l√† sau khi ƒë√£ nh·∫≠p ƒë√∫ng m·∫≠t kh·∫©u
        const pDocx = document.createElement('p');
        pDocx.textContent = `ƒê√¢y l√† n·ªôi dung c·ªßa t√†i li·ªáu "${fileName}" sau khi nh·∫≠p m·∫≠t kh·∫©u.\n\"${ROSA_MESSAGE}".`;
        modalBody.appendChild(pDocx);
        break;
      default:
        const pDefault = document.createElement('p');
        pDefault.textContent = `Kh√¥ng th·ªÉ hi·ªÉn th·ªã lo·∫°i t·ªáp n√†y (${fileName}).`;
        modalBody.appendChild(pDefault);
    }
    openModal();
  }

  function showPasswordPrompt(fileNameForDocx) {
    modalBody.innerHTML = `
      <p>T·ªáp "${fileNameForDocx}" y√™u c·∫ßu m·∫≠t kh·∫©u ƒë·ªÉ m·ªü.</p>
      <input type="password" id="passwordInput" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
      <button id="submitPasswordBtn">M·ªü</button>
      <div id="passwordErrorMsg" class="password-error"></div>
    `;

    const passwordInput = document.getElementById('passwordInput');
    const submitPasswordBtn = document.getElementById('submitPasswordBtn');
    const passwordErrorMsg = document.getElementById('passwordErrorMsg');

    submitPasswordBtn.addEventListener('click', () => {
      if (passwordInput.value === CORRECT_PASSWORD) {
        passwordErrorMsg.textContent = '';
        displayFileContent('docx', fileNameForDocx); // Hi·ªÉn th·ªã n·ªôi dung docx
      } else {
        passwordErrorMsg.textContent = 'M·∫≠t kh·∫©u kh√¥ng ƒë√∫ng. Vui l√≤ng th·ª≠ l·∫°i.';
        passwordInput.focus();
      }
    });
    // Cho ph√©p nh·∫•n Enter ƒë·ªÉ submit m·∫≠t kh·∫©u
    passwordInput.addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            event.preventDefault(); // NgƒÉn h√†nh vi m·∫∑c ƒë·ªãnh c·ªßa Enter (n·∫øu c√≥)
            submitPasswordBtn.click(); // K√≠ch ho·∫°t s·ª± ki·ªán click c·ªßa n√∫t M·ªü
        }
    });


    openModal();
    passwordInput.focus(); // T·ª± ƒë·ªông focus v√†o √¥ m·∫≠t kh·∫©u
  }

  // ƒê√≥ng modal b·∫±ng ph√≠m Escape
  document.addEventListener('keydown', (event) => {
    if (event.key === 'Escape' && fileModal.classList.contains('active')) {
      closeModal();
    }
  });

</script>

</body>
</html>
